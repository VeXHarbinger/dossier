<html>
<head>
<title>Background</title>
<script src='jquery-1.6.4.min.js'></script>
<script src='jquery.json-2.2.min.js'></script>
<link rel="stylesheet" type="text/css" href="style.css"/>
<link rel="shortcut icon" href="logo.gif" />
</head>
<script>

chrome.extension.onRequest.addListener(
	function(request, sender, sendResponse) {
	
		if (request.method == "getLocalStorage") {
			if(localStorage.clump == undefined) localStorage.clump = "";
			sendResponse({message:"getLocal",data: localStorage.clump});
		} else if(request.method == "setLocalStorage"){
			if(localStorage.clump == "undefined") localStorage.clump = "";
			localStorage.clump = JSON.stringify(request.data);
			sendResponse({message:"setLocal",data: JSON.parse(localStorage.clump)});
		} else if(request.method == "copyToClipboard"){
			var response = copy(request.text);
			sendResponse(response);
		} else {
			sendResponse({});
		}

});


</script>
</html>